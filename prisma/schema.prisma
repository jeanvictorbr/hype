generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Tabela base da Guilda
model Guild {
  id              String   @id
  autoVoiceConfig AutoVoiceConfig?
  ticketConfig    TicketConfig?
  features        String[] @default([])
}
// ðŸ“¦ MÃ“DULO: TICKETS (Tickets Ativos)
model ActiveTicket {
  channelId       String   @id // ID do canal de texto do ticket
  ownerId         String       // ID do membro que abriu
  guildId         String       // ID do servidor
}
// ðŸ“¦ MÃ“DULO: AUTO-VOICE (ConfiguraÃ§Ãµes do Painel /hype)
model AutoVoiceConfig {
  guildId         String   @id
  guild           Guild    @relation(fields: [guildId], references: [id], onDelete: Cascade)
  
  triggerChannel  String?  // ID do Canal gatilho
  tempCategory    String?  // ID da Categoria para as salas
  bypassRoles     String[] // Array com IDs dos cargos que tÃªm Passe Livre nas salas trancadas
}

// ðŸ“¦ MÃ“DULO: AUTO-VOICE (Salvar Salas Ativas para nÃ£o perder no restart da Discloud)
model AutoVoiceRoom {
  channelId       String   @id // ID do canal de voz temporÃ¡rio criado
  ownerId         String       // ID do dono da sala
  guildId         String       // ID do servidor
}

// ðŸ“¦ MÃ“DULO: TICKETS (JÃ¡ deixamos pronto pra quando vocÃª for fazer)
model TicketConfig {
  guildId         String   @id
  guild           Guild    @relation(fields: [guildId], references: [id], onDelete: Cascade)
  logChannel      String?  // ðŸ“‚ A NOVA COLUNA PARA GUARDAR OS LOGS
  ticketCategory  String?
  staffRoles      String[]
}